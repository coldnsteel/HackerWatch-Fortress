<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HackerWatch-Fortress v2.2 - Security Awareness Dashboard</title>
    <link rel="manifest" href="manifest.json">
    <style>
        body { font-family: monospace; background: #000; color: #00ff00; padding: 20px; }
        .banner { background: #ffff00; color: #000; padding: 10px; text-align: center; font-weight: bold; }
        .alert { color: #ff0000; border: 1px solid #ff0000; padding: 10px; margin: 10px 0; }
        button { background: #00ff00; color: #000; border: none; padding: 5px 10px; cursor: pointer; }
        a { color: #00ff00; }
        .vpn-toggle { margin: 10px 0; }
        .stats { background: #1a1a1a; padding: 10px; border: 1px solid #00ff00; margin: 10px 0; }
    </style>
</head>
<body>
    <div class="banner">üõ°Ô∏è HackerWatch-Fortress v2.2: Security Awareness Dashboard - Real IP/Device Detection, Anti-Hack Alerts. Full Protection for $19! Issues? Email lexalytics@yahoo.com</div>
    
    <h1>HackerWatch-Fortress v2.2</h1>
    <div class="stats" id="stats">Loading Security Stats...</div>
    <p>IP Address: <span id="ip">Loading...</span> (via ipapi.co)</p>
    <p>Location: <span id="location">Loading...</span> (City, Country)</p>
    <p>Device: <span id="device">Loading...</span></p>
    <p>Open Ports: <span id="ports">N/A (Browser-Limited - Full Scan Requires Fortress Pass)</span></p>
    <p>Alerts: <span id="alerts">0 (Anti-Hack Mode)</span></p>
    <p class="vpn-toggle">VPN Active? <input type="checkbox" id="vpnToggle" onchange="checkVpn()"> No (Check if using VPN)</p>
    <p>Secure Now: <button onclick="promptVpn()">Enable VPN</button> (Protect Against Crypto Hacks)</p>
    <p>Backend: <button onclick="connectBackend()">Connect Backend</button> (WebSocket for Real-Time Threats)</p>
    
    <div class="alert">This PWA detects IP/device risks to prevent hacks like crypto theft. No email monitoring or agency reporting yet‚Äîget full features with $19 Fortress Pass + MFA. <a href="https://coldnsteel.github.io/GMSRFC/fortress-grand-opening.html">Get Started</a></div>
    
    <script src="security-config.js"></script>
    <script>
        // Initialize SecurityConfig
        const secConfig = window.securityConfig || new window.SecurityConfig();
        function updateStats() {
            document.getElementById("stats").innerHTML = `
                Total Threats: ${secConfig.stats.totalThreats} | Email: ${secConfig.stats.emailThreats} | Network: ${secConfig.stats.networkThreats} | Last Update: ${new Date(secConfig.stats.lastUpdate).toLocaleTimeString()}
            `;
        }
        updateStats();

        // Real IP detection via ipapi.co (keyless for client IP, per curl tests)
        fetch("https://ipapi.co/json/")
            .then(response => response.json())
            .then(data => {
                document.getElementById("ip").textContent = data.ip || "IP Detection Failed";
                document.getElementById("location").textContent = `${data.city || "Unknown"}, ${data.country_name || "Unknown"}`;
                checkVpn();
            })
            .catch(() => {
                document.getElementById("ip").textContent = "IP Detection Failed";
                document.getElementById("location").textContent = "Location Unknown";
            });

        // Device detection
        document.getElementById("device").textContent = navigator.userAgent || "Device Unknown";

        // Alerts (real, based on IP/VPN, no fake threats)
        let alertCount = 0;
        function checkVpn() {
            const vpnToggle = document.getElementById("vpnToggle").checked;
            const ipText = document.getElementById("ip").textContent;
            if (!vpnToggle && ipText !== "IP Detection Failed") {
                alertCount++;
                secConfig.stats.networkThreats++;
                secConfig.stats.lastUpdate = Date.now();
                document.getElementById("alerts").textContent = `${alertCount} (Unsecured IP - Enable VPN to Prevent Crypto Hacks)`;
                updateStats();
            } else if (vpnToggle) {
                document.getElementById("alerts").textContent = `${alertCount} (VPN Active - Safer from Hacks)`;
            }
        }
        setInterval(checkVpn, 60000); // Check every minute

        // VPN prompt to protect against hacks
        function promptVpn() {
            alert("To prevent crypto hacks like July 2025, enable a VPN (e.g., NordVPN, ProtonVPN). Get Fortress Pass ($19) for advanced protection with MFA!");
            document.getElementById("vpnToggle").focus();
        }

        // Connect to backend (from package.json scripts)
        function connectBackend() {
            if (typeof WebSocket !== 'undefined') {
                const ws = new WebSocket('ws://localhost:8080'); // Matches package.json websocket_port
                ws.onopen = () => alert('Connected to Backend - Real-Time Threats Active!');
                ws.onmessage = (event) => {
                    secConfig.stats.totalThreats++;
                    updateStats();
                    alert(`Threat Detected: ${event.data}`);
                };
                ws.onerror = () => alert('Backend Connection Failed - Run "npm start" locally');
            } else {
                alert('WebSocket not supported - Use modern browser');
            }
        }

        // No email phishing simulation
        console.log("Email monitoring disabled - full features require Fortress Pass purchase");
    </script>
</body>
</html>
